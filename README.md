# env-example-cli

Простой CLI, который превращает ваши реальные `.env` файлы в безопасные `.env.example`. Поддерживает несколько входных файлов, плейсхолдеры, копирование реальных значений и защиту от случайной перезаписи результирующего файла.

## Требования

- Node.js 16+ (проверено на 18/20)

## Быстрый старт

```bash
# показать справку
node bin/env-example.js --help

# создать .env.example на основе текущего .env
node bin/env-example.js

# глобальная установка (чтобы команда env-example была в PATH)
npm install -g .
env-example --help
```

## Основные сценарии

```bash
# 1. Базовый запуск: ./.env -> ./.env.example
env-example

# 2. С плейсхолдером
env-example --placeholder CHANGE_ME

# 3. Сохраняем реальные значения (например, для деплоя)
env-example --keep-values

# 4. Множество источников + другой выход + принудительное перезаписывание
env-example \
  --input .env \
  --input .env.local \
  --output config/sample.env \
  --force
```

## Опции

| Опция | Описание |
| --- | --- |
| `-i, --input <file>` | Указать конкретный `.env` (можно повторять). По умолчанию `.env`. |
| `-o, --output <file>` | Файл результата. По умолчанию `.env.example`. |
| `-p, --placeholder <value>` | Значение, подставляемое вместо секретов. По умолчанию пустая строка. |
| `--keep-values` | Не затирать значения. Полезно, если хотите перенести реальные настройки. |
| `--force` | Перезаписать выходной файл, если уже существует. |
| `--allow-duplicates` | Не выкидывать повторяющиеся ключи при объединении файлов. |
| `-q, --quiet` | Скромный режим — только ошибки. |
| `-h, --help` / `-v, --version` | Справка и версия. |

## Как это работает

1. Скрипт последовательно читает каждый указанный `.env`.
2. Комментарии и пустые строки сохраняются.
3. Значения переменных заменяются на плейсхолдер (или остаются нетронутыми при `--keep-values`).
4. Дубликаты отбрасываются, если не указан `--allow-duplicates`.
5. Результат записывается в `.env.example` (или любой другой путь), при этом директория создаётся автоматически.

## Полезные советы

- Добавьте команду в `package.json`, чтобы коллеги могли запускать `npm run env:example`.
- Используйте `env-example --placeholder TBD` перед коммитом, чтобы гарантировать актуальный `.env.example`.
- Если нужно собрать файл для CI/CD с реальными значениями, комбинируйте `--keep-values` и `--output ci.env`.

Приятной автоматизации!
